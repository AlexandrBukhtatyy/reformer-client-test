# –û—à–∏–±–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–æ—Ä–º—ã Qwen Code + MCP ReFormer

**–î–∞—Ç–∞:** 2025-12-09
**–§–æ—Ä–º–∞:** Credit Application Form
**–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä:** Qwen Code
**MCP –°–µ—Ä–≤–µ—Ä:** D:\Work\ReFormer\packages\reformer-mcp

---

## –ö–∞—Ç–µ–≥–æ—Ä–∏—è 1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –º–∞—Å–∫–∏ –≤ schema.ts

### 1.1 –ò–ù–ù (12 —Ü–∏—Ñ—Ä)
**–§–∞–π–ª:** `schema.ts`
**–ü–æ–ª–µ:** `inn`
**–ë—ã–ª–æ:**
```typescript
mask: "999999"
```
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
mask: "999999999999"
```
**–ü—Ä–∏—á–∏–Ω–∞:** –ò–ù–ù —Ñ–∏–∑–ª–∏—Ü–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç 12 —Ü–∏—Ñ—Ä, –∞ –Ω–µ 6

---

### 1.2 –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–ª–µ—Ñ–æ–Ω
**–§–∞–π–ª:** `schema.ts`
**–ü–æ–ª–µ:** `phoneMain`
**–ë—ã–ª–æ:**
```typescript
mask: "+7 (999) 999-99-9"
```
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
mask: "+7 (999) 999-99-99"
```
**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–ø—É—â–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è —Ü–∏—Ñ—Ä–∞ –≤ –º–∞—Å–∫–µ

---

### 1.3 –¢–µ–ª–µ—Ñ–æ–Ω —Å–æ–∑–∞–µ–º—â–∏–∫–∞
**–§–∞–π–ª:** `schema.ts`
**–ü–æ–ª–µ:** `coBorrowers[].phone`
**–ë—ã–ª–æ:**
```typescript
mask: "+7 (999) 999-99-9"
```
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
mask: "+7 (999) 999-99-99"
```
**–ü—Ä–∏—á–∏–Ω–∞:** –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –æ—à–∏–±–∫–∞ —Å –º–∞—Å–∫–æ–π —Ç–µ–ª–µ—Ñ–æ–Ω–∞

---

### 1.4 –ü–æ—á—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å (residenceAddress)
**–§–∞–π–ª:** `schema.ts`
**–ü–æ–ª–µ:** `residenceAddress.postalCode`
**–ë—ã–ª–æ:**
```typescript
mask: "99999",
placeholder: "0000"
```
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
mask: "999999",
placeholder: "000000"
```
**–ü—Ä–∏—á–∏–Ω–∞:** –ò–Ω–¥–µ–∫—Å –≤ –†–§ —Å–æ–¥–µ—Ä–∂–∏—Ç 6 —Ü–∏—Ñ—Ä, –∞ –Ω–µ 5

---

### 1.5 –ò–ù–ù –∫–æ–º–ø–∞–Ω–∏–∏ (10 —Ü–∏—Ñ—Ä)
**–§–∞–π–ª:** `schema.ts`
**–ü–æ–ª–µ:** `companyInn`
**–ë—ã–ª–æ:**
```typescript
mask: "999999999"
```
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
mask: "9999999999"
```
**–ü—Ä–∏—á–∏–Ω–∞:** –ò–ù–ù —é—Ä–ª–∏—Ü–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç 10 —Ü–∏—Ñ—Ä

---

### 1.6 –ò–ù–ù –ò–ü (12 —Ü–∏—Ñ—Ä)
**–§–∞–π–ª:** `schema.ts`
**–ü–æ–ª–µ:** `businessInn`
**–ë—ã–ª–æ:**
```typescript
mask: "9999999"
```
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
mask: "999999999999"
```
**–ü—Ä–∏—á–∏–Ω–∞:** –ò–ù–ù –ò–ü —Å–æ–¥–µ—Ä–∂–∏—Ç 12 —Ü–∏—Ñ—Ä

---

### 1.7 –ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è SMS (6 —Ü–∏—Ñ—Ä)
**–§–∞–π–ª:** `schema.ts`
**–ü–æ–ª–µ:** `electronicSignature`
**–ë—ã–ª–æ:**
```typescript
mask: "9999"
```
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
mask: "999999"
```
**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç 6 —Ü–∏—Ñ—Ä —Å–æ–≥–ª–∞—Å–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

---

## –ö–∞—Ç–µ–≥–æ—Ä–∏—è 2: –û—à–∏–±–∫–∏ –≤ —Ä–∞—Å—á—ë—Ç–∞—Ö behaviors.ts

### 2.1 –†–∞—Å—á—ë—Ç paymentToIncomeRatio
**–§–∞–π–ª:** `behaviors.ts`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ù–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –≤ —Ä–∞–∑–Ω—ã—Ö watchField

**–ë—ã–ª–æ (–Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö):**
```typescript
Math.round(ratio * 10) / 100   // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
Math.round(ratio * 100) / 10   // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
```
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å (–µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ):**
```typescript
Math.round(ratio * 100) / 100  // –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ 2 –∑–Ω–∞–∫–æ–≤
```

---

### 2.2 –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã value
**–§–∞–π–ª:** `behaviors.ts`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–∞—Ä–∞–º–µ—Ç—Ä `value` –æ–±—ä—è–≤–ª–µ–Ω –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ callback —Ñ—É–Ω–∫—Ü–∏—è—Ö watchField

**–ë—ã–ª–æ:**
```typescript
watchField(path.field, (value, ctx) => { ... })
```
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
watchField(path.field, (_value, ctx) => { ... })
```
**–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `value` –≤–º–µ—Å—Ç–æ —á—Ç–µ–Ω–∏—è –∏–∑ `ctx.form`**

---

### 2.3 –û–¥–∏–Ω–∞—Ä–Ω—ã–π .value –≤–º–µ—Å—Ç–æ –¥–≤–æ–π–Ω–æ–≥–æ .value.value –≤ behaviors
**–§–∞–π–ª:** `behaviors.ts`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –í BehaviorContext –¥–æ—Å—Ç—É–ø –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ–ª–µ–π —Ç—Ä–µ–±—É–µ—Ç –î–í–û–ô–ù–û–ô `.value.value`

**–ë—ã–ª–æ (–≤–æ –≤—Å–µ—Ö watchField):**
```typescript
watchField(path.field, (_value, ctx) => {
  const income = ctx.form.monthlyIncome.value || 0;  // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!
  const lastName = ctx.form.personalData.lastName.value;  // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!
});
```
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
watchField(path.field, (_value, ctx) => {
  const income = ctx.form.monthlyIncome.value.value || 0;  // –ü—Ä–∞–≤–∏–ª—å–Ω–æ
  const lastName = ctx.form.personalData.lastName.value.value;  // –ü—Ä–∞–≤–∏–ª—å–Ω–æ
});
```
**–ü—Ä–∏—á–∏–Ω–∞:** –í BehaviorContext `ctx.form.field.value` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç FieldNode (signal), –∞ `.value` –Ω–∞ –Ω—ë–º - –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –û–¥–∏–Ω–∞—Ä–Ω—ã–π `.value` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç signal object, –∞ –Ω–µ –ø—Ä–∏–º–∏—Ç–∏–≤.

**–í–ê–ñ–ù–û:** –≠—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç ValidationContext, –≥–¥–µ –Ω—É–∂–µ–Ω –æ–¥–∏–Ω–∞—Ä–Ω—ã–π `.value`!

---

## –ö–∞—Ç–µ–≥–æ—Ä–∏—è 3: –û—à–∏–±–∫–∏ –≤ validation.ts

### 3.1 –û–ø–µ—á–∞—Ç–∫–∞ –≤ —Å—É–º–º–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
**–§–∞–π–ª:** `validation.ts`
**–ë—ã–ª–æ:**
```typescript
ctx.form.propertyValue.value.value < 10000
message: "–°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 1 00 000 ‚ÇΩ"
```
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
ctx.form.propertyValue.value.value < 1000000
message: "–°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 1 000 000 ‚ÇΩ"
```
**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–ø—É—â–µ–Ω –Ω–æ–ª—å –≤ —á–∏—Å–ª–µ –∏ –ø—Ä–æ–±–µ–ª –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏

---

### 3.2 –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è
**–§–∞–π–ª:** `validation.ts`
**–ë—ã–ª–æ:**
```typescript
carPrice < 3000
```
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
carPrice < 300000
```
**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–ø—É—â–µ–Ω—ã –Ω—É–ª–∏ (300 000 —Å–æ–≥–ª–∞—Å–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏)

---

## –ö–∞—Ç–µ–≥–æ—Ä–∏—è 4: Runtime –æ—à–∏–±–∫–∏ - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ñ–æ—Ä–º–∞–º

### 4.0 –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —É—Å–ª–æ–≤–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –≤ React
**–§–∞–π–ª:** `LoanInfoStep.tsx`
**–ë—ã–ª–æ:**
```typescript
export function LoanInfoStep({ control }: StepProps) {
  return (
    {control.loanType.value === 'mortgage' && (
      <div>...</div>
    )}
  );
}
```
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
import { useFormControlValue } from "@reformer/core";

export function LoanInfoStep({ control }: StepProps) {
  const loanType = useFormControlValue(control.loanType);

  return (
    {loanType === 'mortgage' && (
      <div>...</div>
    )}
  );
}
```
**–ü—Ä–∏—á–∏–Ω–∞:** `control.field.value` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Signal, –∞ –Ω–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –î–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –≤ React –Ω—É–∂–µ–Ω —Ö—É–∫ `useFormControlValue`.

---

### 4.1 –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ .controls –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ createForm
**–§–∞–π–ª:** `CreditApplicationForm.tsx`
**–ë—ã–ª–æ:**
```typescript
const formInstance = useMemo(() => form, []);
<LoanInfoStep control={formInstance.controls} />
```
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
const formInstance = useMemo(() => form, []);
<LoanInfoStep control={formInstance} />
```
**–ü—Ä–∏—á–∏–Ω–∞:** `createForm()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `GroupNodeWithControls<T>` –Ω–∞–ø—Ä—è–º—É—é (Proxy), –∞ –Ω–µ –æ–±—ä–µ–∫—Ç —Å `.controls`. –û–±—Ä–∞—â–µ–Ω–∏–µ –∫ `.controls` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `undefined`.

---

### 4.2-4.4 –î–≤–æ–π–Ω–æ–π .value.value –≤ validation.ts

### 4.2 –í–∞–ª–∏–¥–∞—Ü–∏—è hasProperty
**–§–∞–π–ª:** `validation.ts`
**–ë—ã–ª–æ:**
```typescript
if (value && (!ctx.form.properties.value || !ctx.form.properties.value.value || ctx.form.properties.value.value.length === 0))
```
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
const properties = ctx.form.properties.value;
if (value && (!properties || properties.length === 0))
```
**–ü—Ä–∏—á–∏–Ω–∞:** `ctx.form.xxx.value` —É–∂–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è. –î–≤–æ–π–Ω–æ–π `.value.value` –≤—ã–∑—ã–≤–∞–µ—Ç runtime –æ—à–∏–±–∫—É `Cannot read properties of undefined`

---

### 4.3 –í–∞–ª–∏–¥–∞—Ü–∏—è hasExistingLoans
**–§–∞–π–ª:** `validation.ts`
**–ë—ã–ª–æ:**
```typescript
if (value && (!ctx.form.existingLoans.value || !ctx.form.existingLoans.value || ctx.form.existingLoans.value.length === 0))
```
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
const existingLoans = ctx.form.existingLoans.value;
if (value && (!existingLoans || existingLoans.length === 0))
```
**–ü—Ä–∏—á–∏–Ω–∞:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –∑–Ω–∞—á–µ–Ω–∏—è + –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–æ—Å—Ç—É–ø–∞

---

### 4.4 –í–∞–ª–∏–¥–∞—Ü–∏—è hasCoBorrower
**–§–∞–π–ª:** `validation.ts`
**–ë—ã–ª–æ:**
```typescript
if (value && (!ctx.form.coBorrowers.value || !ctx.form.coBorrowers.value.value || ctx.form.coBorrowers.value.value.length === 0))
```
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
const coBorrowers = ctx.form.coBorrowers.value;
if (value && (!coBorrowers || coBorrowers.length === 0))
```
**–ü—Ä–∏—á–∏–Ω–∞:** –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –æ—à–∏–±–∫–∞ —Å –¥–≤–æ–π–Ω—ã–º `.value.value`

---

## –ö–∞—Ç–µ–≥–æ—Ä–∏—è 5: –ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è (behaviors.ts)

### 5.1 –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –ø—Ä–∏ sameAsRegistration
**–§–∞–π–ª:** `behaviors.ts`
**–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è:** 3.11 - "–ü—Ä–∏ true –∫–æ–ø–∏—Ä—É–µ—Ç –∞–¥—Ä–µ—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –∞–¥—Ä–µ—Å –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è"
**–ë—ã–ª–æ:** –ü–æ–≤–µ–¥–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–æ
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
watchField(path.sameAsRegistration, (value, ctx) => {
  if (value) {
    const regAddress = ctx.form.registrationAddress.value.value;
    if (regAddress) {
      ctx.setFieldValue("residenceAddress.region", regAddress.region || "");
      ctx.setFieldValue("residenceAddress.city", regAddress.city || "");
      // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
    }
  }
});
```
**–ü—Ä–∏—á–∏–Ω–∞:** –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–µ —É—á—ë–ª —Å—Ü–µ–Ω–∞—Ä–∏–π –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø –ø–æ–ª–µ–π

---

### 5.2 –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∞–¥—Ä–µ—Å–æ–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
**–§–∞–π–ª:** `behaviors.ts`
**–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è:** –°—Ç—Ä–æ–∫–∞ 1112 - "–ü–æ–ª–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª–µ–π –∞–¥—Ä–µ—Å–∞"
**–ë—ã–ª–æ:** –ü–æ–≤–µ–¥–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–æ
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
watchField(path.registrationAddress, (value, ctx) => {
  if (ctx.form.sameAsRegistration.value.value && value) {
    ctx.setFieldValue("residenceAddress.region", value.region || "");
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
  }
});
```
**–ü—Ä–∏—á–∏–Ω–∞:** –ù—É–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ª—é–±–æ–≥–æ –ø–æ–ª—è registrationAddress

---

### 5.3 –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ—á–∏—Å—Ç–∫–∞ –≥–æ—Ä–æ–¥–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–µ–≥–∏–æ–Ω–∞
**–§–∞–π–ª:** `behaviors.ts`
**–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è:** üÜï - "–û—á–∏—Å—Ç–∫–∞ –≥–æ—Ä–æ–¥–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–µ–≥–∏–æ–Ω–∞"
**–ë—ã–ª–æ:** –ü–æ–≤–µ–¥–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–æ
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
watchField(path.registrationAddress.region, (_value, ctx) => {
  ctx.setFieldValue("registrationAddress.city", "");
});

watchField(path.residenceAddress.region, (_value, ctx) => {
  if (!ctx.form.sameAsRegistration.value.value) {
    ctx.setFieldValue("residenceAddress.city", "");
  }
});
```
**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–∏ —Å–º–µ–Ω–µ —Ä–µ–≥–∏–æ–Ω–∞ —Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤ –º–µ–Ω—è–µ—Ç—Å—è, —Å—Ç–∞—Ä—ã–π –≥–æ—Ä–æ–¥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º

---

### 5.4 –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ—á–∏—Å—Ç–∫–∞ –∞–¥—Ä–µ—Å–∞ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–∏ sameAsRegistration=false
**–§–∞–π–ª:** `behaviors.ts`
**–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è:** 3.11 - "–í–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–ª–∏—á–∞—é—â–µ–º—Å—è –∞–¥—Ä–µ—Å–µ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è, —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–∏–∏"
**–ë—ã–ª–æ:** –ü–æ–≤–µ–¥–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–æ
**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```typescript
watchField(path.sameAsRegistration, (value, ctx) => {
  if (!value) {
    ctx.setFieldValue("residenceAddress.region", "");
    ctx.setFieldValue("residenceAddress.city", "");
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
  }
});
```
**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞ —Ä—É—á–Ω–æ–π –≤–≤–æ–¥ –Ω—É–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å –∞–¥—Ä–µ—Å –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è MCP —Å–µ—Ä–≤–µ—Ä–∞

### 1. –î–æ–±–∞–≤–∏—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –º–∞—Å–æ–∫ –†–§
```typescript
const RF_MASKS = {
  phone: "+7 (999) 999-99-99",
  innPerson: "999999999999",      // 12 —Ü–∏—Ñ—Ä
  innCompany: "9999999999",       // 10 —Ü–∏—Ñ—Ä
  snils: "999-999-999 99",
  postalCode: "999999",
  passportSeries: "99 99",
  passportNumber: "999999",
  departmentCode: "999-999",
  smsCode: "999999",              // 6 —Ü–∏—Ñ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
};
```

### 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö –º–∞—Å–æ–∫
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∏–º–≤–æ–ª–æ–≤ –≤ –º–∞—Å–∫–µ –∏ placeholder
- –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –†–§

### 3. –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—ã—á–∏—Å–ª—è–µ–º—ã—Ö –ø–æ–ª–µ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π —à–∞–±–ª–æ–Ω –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
- –í—ã–Ω–æ—Å–∏—Ç—å –ø–æ–≤—Ç–æ—Ä—è—é—â—É—é—Å—è –ª–æ–≥–∏–∫—É –≤ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ callback
- –ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è - –¥–æ–±–∞–≤–ª—è—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å `_`
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π value –≤–º–µ—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è –∏–∑ ctx.form

### 5. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º —Ñ–æ—Ä–º—ã (–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!)

**–†–ê–ó–ù–´–ï –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è Validation –∏ Behaviors!**

**–í ValidationContext (validation.ts):**
```typescript
// –û–¥–∏–Ω–∞—Ä–Ω—ã–π .value
const fieldValue = ctx.form.fieldName.value;
```

**–í BehaviorContext (behaviors.ts):**
```typescript
// –î–≤–æ–π–Ω–æ–π .value.value
const fieldValue = ctx.form.fieldName.value.value;
```

**–ü—Ä–∏—á–∏–Ω–∞:** –†–∞–∑–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤:
- ValidationContext: `ctx.form.field.value` –Ω–∞–ø—Ä—è–º—É—é –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ
- BehaviorContext: `ctx.form.field.value` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç FieldNode (signal), `.value` –Ω–∞ –Ω—ë–º - –∑–Ω–∞—á–µ–Ω–∏–µ

### 6. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ createForm API
- `createForm()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `GroupNodeWithControls<T>` –Ω–∞–ø—Ä—è–º—É—é (Proxy)
- –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.controls` –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ createForm
```typescript
// –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
const form = createForm<MyForm>({...});
<MyComponent control={form} />

// –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (undefined):
<MyComponent control={form.controls} />
```

### 7. –†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –≤ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- –î–ª—è —É—Å–ª–æ–≤–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—É–∫ `useFormControlValue`
- –ù–ï —á–∏—Ç–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ `control.field.value`
```typescript
// –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
import { useFormControlValue } from "@reformer/core";
const loanType = useFormControlValue(control.loanType);
{loanType === 'mortgage' && <MortgageFields />}

// –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (–Ω–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ):
{control.loanType.value === 'mortgage' && <MortgageFields />}
```

### 8. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è behaviors –¥–ª—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –ø–æ–ª–µ–π (–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!)

–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Ç–∏–ø–∞:
- **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** (–ø–æ–ª–µ A ‚Üí –ø–æ–ª–µ B –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏ C)
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** (–≥—Ä—É–ø–ø–∞ –ø–æ–ª–µ–π A ‚Üí –≥—Ä—É–ø–ø–∞ –ø–æ–ª–µ–π B)
- **–°–±—Ä–æ—Å –∑–∞–≤–∏—Å–∏–º—ã—Ö** (–ø–æ–ª–µ A –∏–∑–º–µ–Ω–µ–Ω–æ ‚Üí –æ—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª–µ B)

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ `watchField`:

```typescript
// –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –ø–æ–ª–µ–π –ø—Ä–∏ —Ñ–ª–∞–≥–µ
watchField(path.sameAsRegistration, (value, ctx) => {
  if (value) {
    const source = ctx.form.registrationAddress.value.value;
    if (source) {
      ctx.setFieldValue("residenceAddress.region", source.region || "");
      ctx.setFieldValue("residenceAddress.city", source.city || "");
      // ... –≤—Å–µ –ø–æ–ª—è –≥—Ä—É–ø–ø—ã
    }
  }
});

// –°–±—Ä–æ—Å –∑–∞–≤–∏—Å–∏–º–æ–≥–æ –ø–æ–ª—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ
watchField(path.region, (_value, ctx) => {
  ctx.setFieldValue("city", "");  // –û—á–∏—Å—Ç–∏—Ç—å –≥–æ—Ä–æ–¥ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–µ–≥–∏–æ–Ω–∞
});
```

**–¢–∏–ø–∏—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏–∑ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π:**
- `sameAs*` —Ñ–ª–∞–≥–∏ ‚Üí –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø –ø–æ–ª–µ–π
- –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (—Ä–µ–≥–∏–æ–Ω ‚Üí –≥–æ—Ä–æ–¥) ‚Üí –æ—á–∏—Å—Ç–∫–∞ –¥–æ—á–µ—Ä–Ω–∏—Ö
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ —Ç–∏–ø–æ–≤ ‚Üí —Å–±—Ä–æ—Å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –ø–æ–ª–µ–π

---

## –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ |
|-----------|-------------------|
| –ú–∞—Å–∫–∏     | 7                 |
| –†–∞—Å—á—ë—Ç—ã   | 3                 |
| –í–∞–ª–∏–¥–∞—Ü–∏—è | 2                 |
| Runtime   | 5                 |
| Behaviors | 4                 |
| **–ò—Ç–æ–≥–æ** | **21**            |
